(this.webpackJsonpauctioneer=this.webpackJsonpauctioneer||[]).push([[0],{142:function(e,t,r){"use strict";r.r(t);var c=r(0),n=r(23),a=r(12),s=r(159),i=r(76),o=(r(89),r(146),r(147),i.a.initializeApp({apiKey:"AIzaSyB2F4R4KkxUwb4GFKs7twRhiHS5i-i51D4",authDomain:"scopic-73416.firebaseapp.com",projectId:"scopic-73416",storageBucket:"scopic-73416.appspot.com",messagingSenderId:"475263107333",appId:"1:475263107333:web:27180a036864e16618376c"})),j=i.a.firestore.FieldValue.serverTimestamp,u=o.firestore(),l=o.storage(),b=o.auth(),d=r(2),O=Object(c.createContext)(),x=function(e){var t=e.children,r=Object(c.useState)(null),n=Object(a.a)(r,2),s=n[0],i=n[1],o=Object(c.useState)(!0),j=Object(a.a)(o,2),l=j[0],x=j[1],h=Object(c.useState)(""),p=Object(a.a)(h,2),f=p[0],m=p[1];return Object(c.useEffect)((function(){return b.onAuthStateChanged((function(e){i(e),x(!1)}))}),[]),Object(c.useEffect)((function(){var e=setTimeout((function(){return m("")}),5e3);return function(){return clearTimeout(e)}}),[f]),Object(d.jsx)(O.Provider,{value:{currentUser:s,register:function(e,t){return b.createUserWithEmailAndPassword(e,t)},login:function(e,t){return b.signInWithEmailAndPassword(e,t)},logout:function(){return b.signOut()},bidAuction:function(e){return u.collection("auctions").doc(e).update({acuerdo:!0})},noteContext:function(e,t){return u.collection("auctions").doc(e).update({note:t})},endAuction:function(e){return u.collection("auctions").doc(e).delete()},globalMsg:f},children:!l&&t})},h=r(154),p=r(43),f=function(e){var t=Object(c.useState)([]),r=Object(a.a)(t,2),n=r[0],s=r[1];return Object(c.useEffect)((function(){var t=u.collection(e).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(p.a)(Object(p.a)({},e.data()),{},{id:e.id}))})),s(t)}));return function(){return t()}}),[e]),{docs:n}},m=r(156),v=r(19),g=r.n(v),w=r(33),y=function(e){var t=Object(c.useState)(0),r=Object(a.a)(t,2),n=r[0],s=r[1],i=Object(c.useState)(null),o=Object(a.a)(i,2),b=o[0],d=o[1];return Object(c.useState)((function(){var t=l.ref(e.itemImage.name),r=u.collection("auctions");t.put(e.itemImage).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;s(t)}),(function(e){console.log(e)}),Object(w.a)(g.a.mark((function c(){var n,a;return g.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,t.getDownloadURL();case 2:return n=c.sent,a=j(),delete e.itemImage,c.next=7,r.add(Object(p.a)(Object(p.a)({},e),{},{createdAt:a,imgUrl:n}));case 7:d(!0);case 8:case"end":return c.stop()}}),c)}))))}),[e]),{progress:n,isCompleted:b}},C=function(e){var t=e.auction,r=e.setAuction,n=y(t),a=n.progress,s=n.isCompleted;return Object(c.useEffect)((function(){s&&r(null)}),[s,r]),Object(d.jsx)(m.a.div,{style:{height:"5px",background:"black"},initial:{width:0},animate:{width:"".concat(a,"%")}})},S=r(28),N=Object(c.createContext)(),k=function(e){var t=e.children,r=f("auctions").docs,n=Object(S.a)(r),s=Object(c.useState)(n),i=Object(a.a)(s,2),o=i[0],j=i[1];return Object(d.jsx)(N.Provider,{value:{handleDB:function(e){j(e)},DB:o},children:t})},L=r(80),R=(r(94),r(95),r(82)),A=r(157),E=r(155),I=r(79),G=r(158),T=function(e){var t=e.setAuction,r=Object(c.useState)(""),n=Object(a.a)(r,2),i=n[0],o=n[1],j=Object(c.useRef)(),u=Object(c.useRef)(),l=Object(c.useRef)(),b=Object(c.useRef)(),x=Object(c.useContext)(O).currentUser,p=["image/png","image/jpeg","image/jpg"],f=function(){var e=Object(w.a)(g.a.mark((function e(r){var c,n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),o(""),p.includes(l.current.files[0].type)){e.next=4;break}return e.abrupt("return",o("Please use a valid image"));case 4:c=new Date,n=c.setHours(c.getHours()),a={email:x.email,title:j.current.value,description:u.current.value,duration:n,itemImage:l.current.files[0],categorie:b.current.value,completed:!1},t(a),closeForm();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=!!x;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("form",{onSubmit:f,className:m?"border border-danger w-75 p-3 mt-5":"d-none",style:{marginLeft:"12.5%"},children:[Object(d.jsxs)(A.a.Body,{children:[i&&Object(d.jsx)(s.a,{variant:"danger",children:i}),Object(d.jsx)(E.a,{children:Object(d.jsx)(I.a,{children:Object(d.jsxs)(G.a.Group,{className:"bg-secondary text-center p-2 text-white w-100 mb-4",children:["Encargado en Turno: ",null===x||void 0===x?void 0:x.email.slice(0,-10)]})})}),Object(d.jsx)(E.a,{children:Object(d.jsx)(I.a,{children:Object(d.jsx)(G.a.Group,{className:"mb-4",children:Object(d.jsx)(G.a.Control,{type:"text",required:!0,ref:j,placeholder:"Numero de Taxi"})})})}),Object(d.jsx)(E.a,{children:Object(d.jsx)(I.a,{children:Object(d.jsx)(G.a.Group,{className:"mb-3",children:Object(d.jsx)(G.a.Control,{type:"text",required:!0,ref:j,placeholder:"Nombre de Taxista"})})})}),Object(d.jsx)(E.a,{children:Object(d.jsxs)(I.a,{children:[Object(d.jsx)(G.a.Label,{children:"Opciones"}),Object(d.jsxs)(G.a.Control,{as:"Select",multiple:!1,ref:b,className:"mb-3",children:[Object(d.jsx)("option",{disabled:!0,children:"Selecciona una Opcion"}),Object(d.jsx)("option",{value:"oxxo",children:"Mantenimiento"}),Object(d.jsx)("option",{value:"otro",children:"Reparacion"}),Object(d.jsx)("option",{value:"pago en efectivo",children:"Choque"}),Object(d.jsx)("option",{value:"",children:"LLantas"},"")]})]})}),Object(d.jsx)(E.a,{children:Object(d.jsx)(I.a,{children:Object(d.jsxs)(G.a.Group,{className:"mb-3",children:[Object(d.jsx)(G.a.Label,{children:"algo 1"}),Object(d.jsx)(G.a.Control,{type:"text",required:!0,ref:j})]})})}),Object(d.jsx)(E.a,{children:Object(d.jsx)(I.a,{children:Object(d.jsxs)(G.a.Group,{className:"mb-3",children:[Object(d.jsx)(G.a.Label,{children:"Algo 2"}),Object(d.jsx)(G.a.Control,{type:"text",required:!0,ref:j})]})})}),Object(d.jsx)(E.a,{children:Object(d.jsx)(I.a,{children:Object(d.jsxs)(G.a.Group,{children:[Object(d.jsx)(G.a.Label,{children:"Comentarios"}),Object(d.jsx)(G.a.Control,{type:"text",required:!0,ref:u})]})})})]}),Object(d.jsx)(A.a.Footer,{children:Object(d.jsx)(h.a,{variant:"secondary",type:"submit",disabled:!0,className:"w-100",children:"Guardar Ticket"})})]})})};Object(L.registerLocale)("es",R.a);var q=function(){var e=Object(c.useState)(null),t=Object(a.a)(e,2),r=t[0],n=t[1],i=Object(c.useContext)(O),o=(i.currentUser,i.globalMsg),j=(Object(c.useContext)(N).DB,Object(c.useState)()),u=Object(a.a)(j,2);u[0],u[1];return Object(d.jsxs)("div",{className:"container-fluid",children:[r&&Object(d.jsx)(C,{auction:r,setAuction:n}),Object(d.jsx)("div",{style:{zIndex:"9999999"},className:"text-center w-50 position-fixed top-10 start-50 translate-middle",children:o&&Object(d.jsx)(s.a,{variant:"danger",children:o})}),Object(d.jsx)("div",{children:Object(d.jsx)(T,{})})]})},F=function(){var e=Object(c.useState)(!1),t=Object(a.a)(e,2),r=(t[0],t[1]),n=Object(c.useState)(""),i=Object(a.a)(n,2),o=i[0],j=i[1],u=Object(c.useRef)(),l=Object(c.useRef)(),b=Object(c.useContext)(O).login,x=function(){var e=Object(w.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),j(""),e.prev=2,e.next=5,b(u.current.value,l.current.value);case 5:r(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),j("Invalid login");case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("form",{onSubmit:x,className:"",children:[Object(d.jsx)(A.a.Header,{children:Object(d.jsx)(A.a.Title,{children:"Entrar"})}),Object(d.jsxs)(A.a.Body,{children:[o&&Object(d.jsx)(s.a,{variant:"danger",children:o}),Object(d.jsxs)(G.a.Group,{children:[Object(d.jsx)(G.a.Label,{children:"Email "}),Object(d.jsx)(G.a.Control,{type:"email",required:!0,ref:u,className:"mb-3"})]}),Object(d.jsxs)(G.a.Group,{children:[Object(d.jsx)(G.a.Label,{children:"Password"}),Object(d.jsx)(G.a.Control,{type:"password",required:!0,ref:l,className:"mb-4"})]})]}),Object(d.jsx)(A.a.Footer,{children:Object(d.jsx)(h.a,{variant:"dark",type:"submit",className:"w-100 mb-5 mt-5",children:"Entrar"})})]})})},B=function(){var e=Object(c.useState)(!1),t=Object(a.a)(e,2),r=t[0],n=t[1],i=Object(c.useState)(""),o=Object(a.a)(i,2),j=o[0],u=o[1],l=Object(c.useRef)(),b=Object(c.useRef)(),x=Object(c.useRef)(),p=Object(c.useContext)(O).register,f=function(){return n(!1)},m=function(){var e=Object(w.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),u(""),b.current.value===x.current.value){e.next=4;break}return e.abrupt("return",u("Passwords does not match"));case 4:return e.prev=4,e.next=7,p(l.current.value,b.current.value);case 7:f(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),u(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(A.a,{centered:!0,show:r,onHide:f,children:Object(d.jsxs)("form",{onSubmit:m,children:[Object(d.jsx)(A.a.Header,{children:Object(d.jsx)(A.a.Title,{children:"Registro"})}),Object(d.jsxs)(A.a.Body,{children:[j&&Object(d.jsx)(s.a,{variant:"danger",children:j}),Object(d.jsxs)(G.a.Group,{children:[Object(d.jsx)(G.a.Label,{children:"Email"}),Object(d.jsx)(G.a.Control,{type:"email",required:!0,ref:l})]}),Object(d.jsxs)(G.a.Group,{children:[Object(d.jsx)(G.a.Label,{children:"Password"}),Object(d.jsx)(G.a.Control,{type:"password",required:!0,ref:b})]}),Object(d.jsxs)(G.a.Group,{children:[Object(d.jsx)(G.a.Label,{children:"Confirmar Password"}),Object(d.jsx)(G.a.Control,{type:"password",required:!0,ref:x})]})]}),Object(d.jsxs)(A.a.Footer,{children:[Object(d.jsx)(h.a,{variant:"secondary",onClick:f,children:"Cancelar"}),Object(d.jsx)(h.a,{variant:"primary",type:"submit",children:"Registrar"})]})]})})})},D=function(){var e=Object(c.useContext)(O),t=e.currentUser,r=e.logout,n=!!t;return Object(d.jsx)("nav",{className:"container-fluid bg-danger",children:Object(d.jsx)("div",{className:"container-fluid",children:Object(d.jsxs)("div",{className:"d-flex",children:[Object(d.jsx)("div",{className:n?"col-11 navbar-brand text-white":"m-5 text-white fs-1",children:"TALLER TAXIS C-10"}),t?Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{onClick:function(){return r()},className:n?"m-2 text-center col-1 text-white":"border",children:"SALIR"})}):Object(d.jsxs)("div",{className:"border col-8 mb-5 mt-5",style:{backgroundColor:"rgb(244,234,234)"},children:[Object(d.jsx)(F,{}),Object(d.jsx)(B,{})]})]})})})},P=function(){return Object(d.jsx)(x,{children:Object(d.jsxs)(k,{children:[Object(d.jsx)(D,{}),Object(d.jsx)(q,{})]})})};r(140);Object(n.render)(Object(d.jsx)(P,{}),document.getElementById("root"))},95:function(e,t,r){}},[[142,1,2]]]);
//# sourceMappingURL=main.5ab7b6ac.chunk.js.map